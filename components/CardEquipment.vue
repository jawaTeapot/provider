<template>
  <div class="equipment">
    <div class="equipment__buttons">
      <button
        :id="'prev' + uniqId"
        class="equipment__btn equipment-prev disabled"
      >
        <svg
          width="18"
          height="18"
          viewBox="0 0 18 18"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M6 4L10.2929 8.29289C10.6834 8.68342 10.6834 9.31658 10.2929 9.70711L6 14"
            stroke="#797E87"
            stroke-width="2"
            stroke-linecap="round"
          />
        </svg>
      </button>
      <template v-if="isShowSlider">
        <swiper
          :modules="modules"
          :navigation="navigationOptions"
          :space-between="20"
          :slides-per-view="2"
          :centered-slides="true"
          :controller="{ control: innerSwiper }"
          @slide-change="slideChange"
          @swiper="setInnerSlider"
        >
          <swiper-slide>
            <button
              class="equipment__button primary"
              :class="{ 'stick-primary': currentTab === 0 }"
              @click="innerSwiper.slideTo(0)"
            >
              Оборудование
            </button>
          </swiper-slide>
          <swiper-slide>
            <button
              class="equipment__button secondary"
              :class="{ 'stick-secondary': currentTab === 1 }"
              @click="innerSwiper.slideTo(1)"
            >
              <svg
                width="14"
                height="14"
                viewBox="0 0 14 14"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M4.5 4.99834C4.5 4.2068 3.44722 3.997 3.16791 4.73762C2.49228 6.52914 2 8.13179 2 8.99826C2 11.7597 4.23858 13.9983 7 13.9983C9.76142 13.9983 12 11.7597 12 8.99826C12 8.06735 11.4318 6.28671 10.6784 4.33503C9.70257 1.80684 9.21464 0.542738 8.61233 0.474651C8.4196 0.452864 8.20934 0.492034 8.03739 0.581761C7.5 0.862173 7.5 2.24089 7.5 4.99834C7.5 5.82676 6.82843 6.49834 6 6.49834C5.17157 6.49834 4.5 5.82676 4.5 4.99834Z"
                  fill="#FF9900"
                />
              </svg>
              Акция
            </button>
          </swiper-slide>
          <swiper-slide>
            <button
              class="equipment__button primary"
              :class="{ 'stick-primary': currentTab === 2 }"
              @click="innerSwiper.slideTo(2)"
            >
              Оборудование
            </button>
          </swiper-slide>
          <swiper-slide>
            <button
              class="equipment__button secondary"
              :class="{ 'stick-secondary': currentTab === 3 }"
              @click="innerSwiper.slideTo(3)"
            >
              <svg
                width="14"
                height="14"
                viewBox="0 0 14 14"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M4.5 4.99834C4.5 4.2068 3.44722 3.997 3.16791 4.73762C2.49228 6.52914 2 8.13179 2 8.99826C2 11.7597 4.23858 13.9983 7 13.9983C9.76142 13.9983 12 11.7597 12 8.99826C12 8.06735 11.4318 6.28671 10.6784 4.33503C9.70257 1.80684 9.21464 0.542738 8.61233 0.474651C8.4196 0.452864 8.20934 0.492034 8.03739 0.581761C7.5 0.862173 7.5 2.24089 7.5 4.99834C7.5 5.82676 6.82843 6.49834 6 6.49834C5.17157 6.49834 4.5 5.82676 4.5 4.99834Z"
                  fill="#FF9900"
                />
              </svg>
              Акция
            </button>
          </swiper-slide>
        </swiper>
      </template>
      <button
        :id="'next' + uniqId"
        class="equipment__btn equipment-next disabled"
      >
        <svg
          width="18"
          height="18"
          viewBox="0 0 18 18"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M6 4L10.2929 8.29289C10.6834 8.68342 10.6834 9.31658 10.2929 9.70711L6 14"
            stroke="#797E87"
            stroke-width="2"
            stroke-linecap="round"
          />
        </svg>
      </button>
    </div>
    <div v-show="currentTab === 0" class="equipment__item">
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M5.63636 13.6944C5.22215 13.6944 4.88636 14.0302 4.88636 14.4444C4.88636 14.8587 5.22215 15.1944 5.63636 15.1944V13.6944ZM6.54545 15.1944C6.95967 15.1944 7.29545 14.8587 7.29545 14.4444C7.29545 14.0302 6.95967 13.6944 6.54545 13.6944V15.1944ZM10.1818 13.6944C9.7676 13.6944 9.43182 14.0302 9.43182 14.4444C9.43182 14.8587 9.7676 15.1944 10.1818 15.1944V13.6944ZM11.0909 15.1944C11.5051 15.1944 11.8409 14.8587 11.8409 14.4444C11.8409 14.0302 11.5051 13.6944 11.0909 13.6944V15.1944ZM6.34625 1.75799C6.21259 1.36594 5.78642 1.15646 5.39436 1.29012C5.0023 1.42377 4.79283 1.84995 4.92648 2.24201L6.34625 1.75799ZM19.0735 2.24201C19.2072 1.84995 18.9977 1.42377 18.6056 1.29012C18.2136 1.15646 17.7874 1.36594 17.6538 1.75799L19.0735 2.24201ZM18.964 8.1178L19.5596 7.66198L18.964 8.1178ZM5.03598 8.1178L4.4404 7.66198L5.03598 8.1178ZM3.81818 11.6389H20.1818V10.1389H3.81818V11.6389ZM21.25 12.6667V16.2222H22.75V12.6667H21.25ZM20.1818 17.25H3.81818V18.75H20.1818V17.25ZM2.75 16.2222V12.6667H1.25V16.2222H2.75ZM3.81818 17.25C3.21226 17.25 2.75 16.774 2.75 16.2222H1.25C1.25 17.6341 2.41579 18.75 3.81818 18.75V17.25ZM21.25 16.2222C21.25 16.774 20.7877 17.25 20.1818 17.25V18.75C21.5842 18.75 22.75 17.6341 22.75 16.2222H21.25ZM20.1818 11.6389C20.7877 11.6389 21.25 12.1148 21.25 12.6667H22.75C22.75 11.2548 21.5842 10.1389 20.1818 10.1389V11.6389ZM3.81818 10.1389C2.41579 10.1389 1.25 11.2548 1.25 12.6667H2.75C2.75 12.1148 3.21226 11.6389 3.81818 11.6389V10.1389ZM3.05013 11.9466L5.63157 8.57362L4.4404 7.66198L1.85896 11.0349L3.05013 11.9466ZM18.3684 8.57363L20.9499 11.9466L22.141 11.0349L19.5596 7.66198L18.3684 8.57363ZM5.63636 15.1944H6.54545V13.6944H5.63636V15.1944ZM10.1818 15.1944H11.0909V13.6944H10.1818V15.1944ZM6.62421 8.08333H7.45455V6.58333H6.62421V8.08333ZM8.16443 7.09133L6.34625 1.75799L4.92648 2.24201L6.74466 7.57534L8.16443 7.09133ZM7.45455 8.08333H16.5455V6.58333H7.45455V8.08333ZM16.5455 8.08333H17.3758V6.58333H16.5455V8.08333ZM17.2553 7.57534L19.0735 2.24201L17.6538 1.75799L15.8356 7.09133L17.2553 7.57534ZM19.5596 7.66198C19.0393 6.98209 18.2319 6.58333 17.3758 6.58333V8.08333C17.7649 8.08333 18.1319 8.26459 18.3684 8.57363L19.5596 7.66198ZM5.63157 8.57362C5.86809 8.26458 6.23505 8.08333 6.62421 8.08333V6.58333C5.76806 6.58333 4.96074 6.98209 4.4404 7.66198L5.63157 8.57362Z"
          fill="#0098FF"
        />
      </svg>
      <div class="equipment__block">
        <div class="equipment__headline">Роутер</div>
        <div class="equipment__text">Аренда 10 руб/мес</div>
      </div>
    </div>
    <div v-show="currentTab === 1" class="equipment__item">
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M5.63636 13.6944C5.22215 13.6944 4.88636 14.0302 4.88636 14.4444C4.88636 14.8587 5.22215 15.1944 5.63636 15.1944V13.6944ZM6.54545 15.1944C6.95967 15.1944 7.29545 14.8587 7.29545 14.4444C7.29545 14.0302 6.95967 13.6944 6.54545 13.6944V15.1944ZM10.1818 13.6944C9.7676 13.6944 9.43182 14.0302 9.43182 14.4444C9.43182 14.8587 9.7676 15.1944 10.1818 15.1944V13.6944ZM11.0909 15.1944C11.5051 15.1944 11.8409 14.8587 11.8409 14.4444C11.8409 14.0302 11.5051 13.6944 11.0909 13.6944V15.1944ZM6.34625 1.75799C6.21259 1.36594 5.78642 1.15646 5.39436 1.29012C5.0023 1.42377 4.79283 1.84995 4.92648 2.24201L6.34625 1.75799ZM19.0735 2.24201C19.2072 1.84995 18.9977 1.42377 18.6056 1.29012C18.2136 1.15646 17.7874 1.36594 17.6538 1.75799L19.0735 2.24201ZM18.964 8.1178L19.5596 7.66198L18.964 8.1178ZM5.03598 8.1178L4.4404 7.66198L5.03598 8.1178ZM3.81818 11.6389H20.1818V10.1389H3.81818V11.6389ZM21.25 12.6667V16.2222H22.75V12.6667H21.25ZM20.1818 17.25H3.81818V18.75H20.1818V17.25ZM2.75 16.2222V12.6667H1.25V16.2222H2.75ZM3.81818 17.25C3.21226 17.25 2.75 16.774 2.75 16.2222H1.25C1.25 17.6341 2.41579 18.75 3.81818 18.75V17.25ZM21.25 16.2222C21.25 16.774 20.7877 17.25 20.1818 17.25V18.75C21.5842 18.75 22.75 17.6341 22.75 16.2222H21.25ZM20.1818 11.6389C20.7877 11.6389 21.25 12.1148 21.25 12.6667H22.75C22.75 11.2548 21.5842 10.1389 20.1818 10.1389V11.6389ZM3.81818 10.1389C2.41579 10.1389 1.25 11.2548 1.25 12.6667H2.75C2.75 12.1148 3.21226 11.6389 3.81818 11.6389V10.1389ZM3.05013 11.9466L5.63157 8.57362L4.4404 7.66198L1.85896 11.0349L3.05013 11.9466ZM18.3684 8.57363L20.9499 11.9466L22.141 11.0349L19.5596 7.66198L18.3684 8.57363ZM5.63636 15.1944H6.54545V13.6944H5.63636V15.1944ZM10.1818 15.1944H11.0909V13.6944H10.1818V15.1944ZM6.62421 8.08333H7.45455V6.58333H6.62421V8.08333ZM8.16443 7.09133L6.34625 1.75799L4.92648 2.24201L6.74466 7.57534L8.16443 7.09133ZM7.45455 8.08333H16.5455V6.58333H7.45455V8.08333ZM16.5455 8.08333H17.3758V6.58333H16.5455V8.08333ZM17.2553 7.57534L19.0735 2.24201L17.6538 1.75799L15.8356 7.09133L17.2553 7.57534ZM19.5596 7.66198C19.0393 6.98209 18.2319 6.58333 17.3758 6.58333V8.08333C17.7649 8.08333 18.1319 8.26459 18.3684 8.57363L19.5596 7.66198ZM5.63157 8.57362C5.86809 8.26458 6.23505 8.08333 6.62421 8.08333V6.58333C5.76806 6.58333 4.96074 6.98209 4.4404 7.66198L5.63157 8.57362Z"
          fill="#0098FF"
        />
      </svg>
      <div class="equipment__block">
        <div class="equipment__headline">Акция</div>
        <div class="equipment__text">Аренда 10 руб/мес</div>
      </div>
    </div>
    <div v-show="currentTab === 2" class="equipment__item">
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M5.63636 13.6944C5.22215 13.6944 4.88636 14.0302 4.88636 14.4444C4.88636 14.8587 5.22215 15.1944 5.63636 15.1944V13.6944ZM6.54545 15.1944C6.95967 15.1944 7.29545 14.8587 7.29545 14.4444C7.29545 14.0302 6.95967 13.6944 6.54545 13.6944V15.1944ZM10.1818 13.6944C9.7676 13.6944 9.43182 14.0302 9.43182 14.4444C9.43182 14.8587 9.7676 15.1944 10.1818 15.1944V13.6944ZM11.0909 15.1944C11.5051 15.1944 11.8409 14.8587 11.8409 14.4444C11.8409 14.0302 11.5051 13.6944 11.0909 13.6944V15.1944ZM6.34625 1.75799C6.21259 1.36594 5.78642 1.15646 5.39436 1.29012C5.0023 1.42377 4.79283 1.84995 4.92648 2.24201L6.34625 1.75799ZM19.0735 2.24201C19.2072 1.84995 18.9977 1.42377 18.6056 1.29012C18.2136 1.15646 17.7874 1.36594 17.6538 1.75799L19.0735 2.24201ZM18.964 8.1178L19.5596 7.66198L18.964 8.1178ZM5.03598 8.1178L4.4404 7.66198L5.03598 8.1178ZM3.81818 11.6389H20.1818V10.1389H3.81818V11.6389ZM21.25 12.6667V16.2222H22.75V12.6667H21.25ZM20.1818 17.25H3.81818V18.75H20.1818V17.25ZM2.75 16.2222V12.6667H1.25V16.2222H2.75ZM3.81818 17.25C3.21226 17.25 2.75 16.774 2.75 16.2222H1.25C1.25 17.6341 2.41579 18.75 3.81818 18.75V17.25ZM21.25 16.2222C21.25 16.774 20.7877 17.25 20.1818 17.25V18.75C21.5842 18.75 22.75 17.6341 22.75 16.2222H21.25ZM20.1818 11.6389C20.7877 11.6389 21.25 12.1148 21.25 12.6667H22.75C22.75 11.2548 21.5842 10.1389 20.1818 10.1389V11.6389ZM3.81818 10.1389C2.41579 10.1389 1.25 11.2548 1.25 12.6667H2.75C2.75 12.1148 3.21226 11.6389 3.81818 11.6389V10.1389ZM3.05013 11.9466L5.63157 8.57362L4.4404 7.66198L1.85896 11.0349L3.05013 11.9466ZM18.3684 8.57363L20.9499 11.9466L22.141 11.0349L19.5596 7.66198L18.3684 8.57363ZM5.63636 15.1944H6.54545V13.6944H5.63636V15.1944ZM10.1818 15.1944H11.0909V13.6944H10.1818V15.1944ZM6.62421 8.08333H7.45455V6.58333H6.62421V8.08333ZM8.16443 7.09133L6.34625 1.75799L4.92648 2.24201L6.74466 7.57534L8.16443 7.09133ZM7.45455 8.08333H16.5455V6.58333H7.45455V8.08333ZM16.5455 8.08333H17.3758V6.58333H16.5455V8.08333ZM17.2553 7.57534L19.0735 2.24201L17.6538 1.75799L15.8356 7.09133L17.2553 7.57534ZM19.5596 7.66198C19.0393 6.98209 18.2319 6.58333 17.3758 6.58333V8.08333C17.7649 8.08333 18.1319 8.26459 18.3684 8.57363L19.5596 7.66198ZM5.63157 8.57362C5.86809 8.26458 6.23505 8.08333 6.62421 8.08333V6.58333C5.76806 6.58333 4.96074 6.98209 4.4404 7.66198L5.63157 8.57362Z"
          fill="#0098FF"
        />
      </svg>
      <div class="equipment__block">
        <div class="equipment__headline">Роутер</div>
        <div class="equipment__text">Аренда 10 руб/мес</div>
      </div>
    </div>
    <div v-show="currentTab === 3" class="equipment__item">
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M5.63636 13.6944C5.22215 13.6944 4.88636 14.0302 4.88636 14.4444C4.88636 14.8587 5.22215 15.1944 5.63636 15.1944V13.6944ZM6.54545 15.1944C6.95967 15.1944 7.29545 14.8587 7.29545 14.4444C7.29545 14.0302 6.95967 13.6944 6.54545 13.6944V15.1944ZM10.1818 13.6944C9.7676 13.6944 9.43182 14.0302 9.43182 14.4444C9.43182 14.8587 9.7676 15.1944 10.1818 15.1944V13.6944ZM11.0909 15.1944C11.5051 15.1944 11.8409 14.8587 11.8409 14.4444C11.8409 14.0302 11.5051 13.6944 11.0909 13.6944V15.1944ZM6.34625 1.75799C6.21259 1.36594 5.78642 1.15646 5.39436 1.29012C5.0023 1.42377 4.79283 1.84995 4.92648 2.24201L6.34625 1.75799ZM19.0735 2.24201C19.2072 1.84995 18.9977 1.42377 18.6056 1.29012C18.2136 1.15646 17.7874 1.36594 17.6538 1.75799L19.0735 2.24201ZM18.964 8.1178L19.5596 7.66198L18.964 8.1178ZM5.03598 8.1178L4.4404 7.66198L5.03598 8.1178ZM3.81818 11.6389H20.1818V10.1389H3.81818V11.6389ZM21.25 12.6667V16.2222H22.75V12.6667H21.25ZM20.1818 17.25H3.81818V18.75H20.1818V17.25ZM2.75 16.2222V12.6667H1.25V16.2222H2.75ZM3.81818 17.25C3.21226 17.25 2.75 16.774 2.75 16.2222H1.25C1.25 17.6341 2.41579 18.75 3.81818 18.75V17.25ZM21.25 16.2222C21.25 16.774 20.7877 17.25 20.1818 17.25V18.75C21.5842 18.75 22.75 17.6341 22.75 16.2222H21.25ZM20.1818 11.6389C20.7877 11.6389 21.25 12.1148 21.25 12.6667H22.75C22.75 11.2548 21.5842 10.1389 20.1818 10.1389V11.6389ZM3.81818 10.1389C2.41579 10.1389 1.25 11.2548 1.25 12.6667H2.75C2.75 12.1148 3.21226 11.6389 3.81818 11.6389V10.1389ZM3.05013 11.9466L5.63157 8.57362L4.4404 7.66198L1.85896 11.0349L3.05013 11.9466ZM18.3684 8.57363L20.9499 11.9466L22.141 11.0349L19.5596 7.66198L18.3684 8.57363ZM5.63636 15.1944H6.54545V13.6944H5.63636V15.1944ZM10.1818 15.1944H11.0909V13.6944H10.1818V15.1944ZM6.62421 8.08333H7.45455V6.58333H6.62421V8.08333ZM8.16443 7.09133L6.34625 1.75799L4.92648 2.24201L6.74466 7.57534L8.16443 7.09133ZM7.45455 8.08333H16.5455V6.58333H7.45455V8.08333ZM16.5455 8.08333H17.3758V6.58333H16.5455V8.08333ZM17.2553 7.57534L19.0735 2.24201L17.6538 1.75799L15.8356 7.09133L17.2553 7.57534ZM19.5596 7.66198C19.0393 6.98209 18.2319 6.58333 17.3758 6.58333V8.08333C17.7649 8.08333 18.1319 8.26459 18.3684 8.57363L19.5596 7.66198ZM5.63157 8.57362C5.86809 8.26458 6.23505 8.08333 6.62421 8.08333V6.58333C5.76806 6.58333 4.96074 6.98209 4.4404 7.66198L5.63157 8.57362Z"
          fill="#0098FF"
        />
      </svg>
      <div class="equipment__block">
        <div class="equipment__headline">Акция2</div>
        <div class="equipment__text">Аренда 10 руб/мес</div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from "vue";
import { Navigation, Controller } from "swiper";
import { Swiper, SwiperSlide } from "swiper/vue";
import "swiper/css";
import "swiper/css/navigation";

const innerSwiper = ref(null);

function setInnerSlider(swiper: any) {
  innerSwiper.value = swiper;
}
function slideChange(e: any) {
  currentTab.value = e.activeIndex;
}

const modules = [Navigation, Controller];

const uniqId = ref<any>(null);

const generateId = () => {
  return "id" + Math.random().toString(16).slice(2);
};

const isShowSlider = ref(false);

const navigationOptions = ref({});

const currentTab = ref(0);

onMounted(() => {
  uniqId.value = generateId();
  navigationOptions.value = {
    prevEl: "#prev" + uniqId.value,
    nextEl: "#next" + uniqId.value,
    disabledClass: "disabled",
  };
  isShowSlider.value = true;
});
</script>

<style scoped lang="scss">
@import "@/assets/css/_mixins.scss";
.equipment {
  padding: toRem(16) toRem(0);
  border-block: toRem(1) solid #eaedf2;
  &__button {
    margin-bottom: toRem(10);
    padding: toRem(8) toRem(9);
    border-radius: toRem(8);
    font-weight: 800;
    font-size: toRem(12);
    line-height: toRem(15);
    position: relative;
    svg {
      margin-right: toRem(4);
    }
  }
  &__btn {
    width: toRem(18);
    height: toRem(18);
    top: 17%;
    right: toRem(-19);
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    z-index: 9999;
    @include phone {
      display: none;
    }
    &:first-child {
      left: toRem(-19);
      svg {
        transform: rotate(180deg);
      }
    }
  }
  &__buttons {
    margin-bottom: toRem(16);
    display: flex;
    align-items: center;
    position: relative;
    .swiper-slide {
      &:nth-child(odd) {
        width: auto !important;
      }
      &:nth-child(even) {
        width: auto !important;
      }
    }
  }
  &__item {
    display: flex;
    align-items: flex-start;
    svg {
      margin-right: toRem(12);
    }
  }
  &__headline {
    font-weight: 600;
    font-size: toRem(14);
    line-height: toRem(18);
    color: #465270;
  }
  &__text {
    margin-top: toRem(4);
    font-weight: 400;
    font-size: toRem(12);
    line-height: toRem(16);
    color: #585e69;
    opacity: 0.8;
  }
}
.primary {
  background: #e6eefe;
  color: #465270;
  &:hover {
    background: #d0ddf7;
    &:before {
      border-top: toRem(8) solid #d0ddf7;
    }
  }
}
.secondary {
  background: #fff4cd;
  color: #ff9900;
  &:hover {
    background: #ffeec2;
    &:before {
      border-top: toRem(8) solid #ffeec2;
    }
  }
}
.stick-primary {
  &:before {
    content: "";
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    bottom: toRem(-15);
    border: toRem(8) solid transparent;
    border-top: toRem(8) solid #e6eefe;
  }
}
.stick-secondary {
  &:before {
    content: "";
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    bottom: toRem(-15);
    border: toRem(8) solid transparent;
    border-top: toRem(8) solid #fff4cd;
  }
}
</style>
